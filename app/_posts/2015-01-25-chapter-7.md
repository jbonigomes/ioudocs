---
layout:     docs
categories: chapter
---

# Chapter 7

## Review/Reflections

reflect about usage of noSQL and how hard it was to make a transition between the relational world to Firebase.

the original structure:

    {
      "logs" : {
        "123" : {
          "bought" : {
            "567" : {
              "amended" : true,
              "date" : 1412635438623,
              "name" : "October",
              "owner" : "10152357995965379",
              "price" : "28"
            },
            "891" : {
              "amended" : false,
              "date" : 1416851097157,
              "name" : "Top up",
              "owner" : "10152774088530030",
              "price" : "30.00"
            }
          },
          "image" : "lightbulb",
          "members" : {
            "444" : true,
            "555" : true
          },
          "name" : "Electricity"
        },
        "234" : {
          "bought" : {
            "912" : {
              "amended" : false,
              "date" : 1412635323357,
              "name" : "Salt",
              "owner" : "10201952652612125",
              "price" : "0.29"
            },
            "111" : {
              "amended" : true,
              "date" : 1415408705349,
              "name" : "Kitchen roll X2",
              "owner" : "10152774088530030",
              "price" : "3.29"
            },
          },
          "image" : "hazard",
          "members" : {
            "444" : true,
            "555" : true
          },
          "name" : "Household"
        }
      },
      "users" : {
        "444" : {
          ".priority" : "444",
          "currency" : "£",
          "name" : "Jose Gomes"
        },
        "555" : {
          ".priority" : "555",
          "currency" : "£",
          "name" : "Nik Grinkevich"
        },
      }
    }

The final structure:

    {
      // rooms contains only meta info about each room
      // stored under the room's unique ID
      "rooms": {
        "one": {
          "name": "room alpha",
          "type": "private"
        },
        "two": { ... },
        "three": { ... }
      },

      // room members are easily accessible (or restricted)
      // we also store these by room ID
      "members": {
        // we'll talk about indices like this below
        "one": {
          "mchen": true,
          "hmadi": true
        },
        "two": { ... },
        "three": { ... }
      },

      // messages are separate from data we may want to iterate quickly
      // but still easily paginated and queried, and organized by room ID
      "messages": {
        "one": {
          "m1": { "sender": "mchen", "message": "foo" },
          "m2": { ... },
          "m3": { ... }
        },
        "two": { ... },
        "three": { ... }
      }
    }

now the security rules can be written like this

    ...

Reflect about the facebook oAuth...

talk about async calls and the angular $digest loop

## Updating on Android store

Must have the key and the password, using the key, run the jarsigner tool then
zipalign
